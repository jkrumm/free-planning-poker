/* Import Typography Plugin for prose classes */
@plugin '@tailwindcss/typography';

/* Load JS config for typography customization */
@config '../../tailwind.config.js';

/* Tell Tailwind where to scan for classes */
@source '../pages/**/*.{js,ts,jsx,tsx,mdx}';
@source '../components/**/*.{js,ts,jsx,tsx,mdx}';
@source '../app/**/*.{js,ts,jsx,tsx,mdx}';

/*
 * Define CSS layers for proper cascade
 * IMPORTANT: utilities layer is NOT included here - it will be imported outside layers
 * This allows Tailwind utilities to override Mantine component styles
 */
@layer theme, base, mantine, components;

/* Import Tailwind CSS v4 - split imports for proper layer control */
@import 'tailwindcss/theme.css' layer(theme);
@import 'tailwindcss/preflight.css' layer(base);

/* Import Mantine styles into the mantine layer */
@import '@mantine/core/styles.layer.css';
@import '@mantine/notifications/styles.css';

/* Import Tailwind utilities OUTSIDE of any layer to ensure highest priority */
@import 'tailwindcss/utilities.css';

/*
 * Fonts are loaded via next/font in _app.tsx with font-display: block
 * This prevents FOUC by blocking render until fonts are loaded
 * Font CSS variables are: --font-inter, --font-manrope, --font-jetbrains-mono
 */

/* Custom dark mode variant that integrates with Mantine's color scheme */
@custom-variant dark (&:where([data-mantine-color-scheme=dark], [data-mantine-color-scheme=dark] *));

/*
 * Reference next/font CSS variables for Tailwind
 * These are defined by next/font in _app.tsx
 */
@theme inline {
  --font-sans: var(--font-inter);
  --font-heading: var(--font-manrope);
  --font-mono: var(--font-jetbrains-mono);
}

/* Tailwind v4 theme customization */
@theme {
  /* Custom colors - Primary (Sky Blue) */
  --color-primary-50: #f0f9ff;
  --color-primary-100: #e0f2fe;
  --color-primary-200: #bae6fd;
  --color-primary-300: #7dd3fc;
  --color-primary-400: #38bdf8;
  --color-primary-500: #0ea5e9;
  --color-primary-600: #0284c7;
  --color-primary-700: #0369a1;
  --color-primary-800: #075985;
  --color-primary-900: #0c4a6e;
  --color-primary-950: #082f49;

  /* Custom colors - Gray (Slate) */
  --color-gray-50: #f8fafc;
  --color-gray-100: #f1f5f9;
  --color-gray-200: #e2e8f0;
  --color-gray-300: #cbd5e1;
  --color-gray-400: #94a3b8;
  --color-gray-500: #64748b;
  --color-gray-600: #475569;
  --color-gray-700: #334155;
  --color-gray-800: #1e293b;
  --color-gray-900: #0f172a;
  --color-gray-950: #020617;

  /* Custom font sizes with line heights */
  --font-size-heading-1: 4.0625rem;
  --line-height-heading-1: 1.1;
  --font-weight-heading-1: 600;

  --font-size-heading-2: 1.7rem;
  --line-height-heading-2: 1.3;
  --font-weight-heading-2: 600;

  --font-size-heading-3: 1.4rem;
  --line-height-heading-3: 1.4;
  --font-weight-heading-3: 600;

  --font-size-heading-4: 1.25rem;
  --line-height-heading-4: 1.4;
  --font-weight-heading-4: 600;

  --font-size-heading-5: 1.125rem;
  --line-height-heading-5: 1.4;
  --font-weight-heading-5: 600;

  --font-size-heading-6: 1.125rem;
  --line-height-heading-6: 1.4;
  --font-weight-heading-6: 600;

  --font-size-body-large: 1.125rem;
  --line-height-body-large: 1.6;

  --font-size-body-base: 1rem;
  --line-height-body-base: 1.6;

  --font-size-body-small: 0.875rem;
  --line-height-body-small: 1.5;

  /* Animations */
  --animate-shimmer: shimmer 2s linear infinite;
  @keyframes shimmer {
    from {
      background-position: 0 0;
    }
    to {
      background-position: -200% 0;
    }
  }
}

/* Base layer styles */
@layer base {
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
  }

  html {
    overflow-y: scroll;
    color-scheme: light;
    scroll-behavior: smooth;
  }

  /* Apply default font family to body */
  body {
    font-family: var(--font-sans);
  }

  /* Restore Tailwind v3 button cursor pointer behavior */
  button:not(:disabled),
  [role='button']:not(:disabled) {
    cursor: pointer;
  }

  /* Restore Tailwind v3 default border color for better compatibility */
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentColor);
  }

  /* Restore Tailwind v3 placeholder color */
  input::placeholder,
  textarea::placeholder {
    color: var(--color-gray-400);
  }

  /* Font family utilities */
  .font-inter {
    font-family: var(--font-sans);
  }

  .font-manrope {
    font-family: var(--font-heading);
  }

  /* Code blocks */
  code,
  pre,
  .mono,
  .font-mono {
    font-family: var(--font-mono);
  }

  /* Large text */
  .text-large {
    font-size: var(--font-size-body-large);
    line-height: var(--line-height-body-large);
  }

  /* Small text */
  small,
  .text-small {
    font-size: var(--font-size-body-small);
    line-height: var(--line-height-body-small);
  }

  nav {
    backdrop-filter: blur(10px) !important;
    border: 1px solid #1a1b1e;
  }

  article h3 {
    text-align: center;
    margin-top: 40px !important;
    margin-bottom: 10px !important;
  }

  article h4 {
    text-align: center;
    margin-top: 20px !important;
    margin-bottom: 5px !important;
  }

  table tr {
    padding: 10px 0 !important;
  }

  .react-markdown pre {
    text-wrap: balance;
    border-radius: 4px;
    border: 1px solid #141517;
    background-color: #212529;
    padding: 16px;
  }
}

/* Utility layer styles */
@layer utilities {
  /* Custom typography utilities matching v3 config */
  .text-heading-1 {
    font-size: var(--font-size-heading-1);
    line-height: var(--line-height-heading-1);
    font-weight: var(--font-weight-heading-1);
  }

  .text-heading-2 {
    font-size: var(--font-size-heading-2);
    line-height: var(--line-height-heading-2);
    font-weight: var(--font-weight-heading-2);
  }

  .text-heading-3 {
    font-size: var(--font-size-heading-3);
    line-height: var(--line-height-heading-3);
    font-weight: var(--font-weight-heading-3);
  }

  .text-heading-4 {
    font-size: var(--font-size-heading-4);
    line-height: var(--line-height-heading-4);
    font-weight: var(--font-weight-heading-4);
  }

  .text-heading-5 {
    font-size: var(--font-size-heading-5);
    line-height: var(--line-height-heading-5);
    font-weight: var(--font-weight-heading-5);
  }

  .text-heading-6 {
    font-size: var(--font-size-heading-6);
    line-height: var(--line-height-heading-6);
    font-weight: var(--font-weight-heading-6);
  }

  .text-body-large {
    font-size: var(--font-size-body-large);
    line-height: var(--line-height-body-large);
  }

  .text-body-base {
    font-size: var(--font-size-body-base);
    line-height: var(--line-height-body-base);
  }

  .text-body-small {
    font-size: var(--font-size-body-small);
    line-height: var(--line-height-body-small);
  }

  .bg-grid-white\/\[0\.02\] {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32' width='32' height='32' fill='none' stroke='rgb(255 255 255 / 0.012)'%3e%3cpath d='M0 .5H31.5V32'/%3e%3c/svg%3e");
  }

  .fade-out-to-bottom {
    mask-image: linear-gradient(
      to bottom,
      rgba(0, 0, 0, 1) 0,
      rgba(0, 0, 0, 1) 20%,
      rgba(0, 0, 0, 0) 100%
    );
    -webkit-mask-image: linear-gradient(
      to bottom,
      rgba(0, 0, 0, 1) 0,
      rgba(0, 0, 0, 1) 20%,
      rgba(0, 0, 0, 0) 100%
    );
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* For Firefox */
  .scrollbar-hide {
    scrollbar-width: none;
  }

  .logo {
    content: '';
    width: 150px;
    height: 150px;
    margin: 0 auto 8px auto;
    background-image: url('data:image/svg+xml;utf8,%3Csvg%20viewBox%3D%220%200%20256%20256%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cdefs%3E%3ClinearGradient%20id%3D%22grad1%22%20x1%3D%220%25%22%20y1%3D%220%25%22%20x2%3D%220%25%22%20y2%3D%22100%25%22%3E%3Cstop%20offset%3D%220%25%22%20style%3D%22stop-color%3A%23f8fafc%3Bstop-opacity%3A1%22%20%2F%3E%3Cstop%20offset%3D%22100%25%22%20style%3D%22stop-color%3A%2394a3b8%3Bstop-opacity%3A1%22%20%2F%3E%3C%2FlinearGradient%3E%3C%2Fdefs%3E%3Cpath%20fill%3D%22none%22%20d%3D%22M0%200h256v256H0z%22%3E%3C%2Fpath%3E%3Cpath%20d%3D%22M202.2%20200.8a103.8%20103.8%200%200%200%200-145.6%202.3%202.3%200%200%200-.7-.7%202.3%202.3%200%200%200-.7-.7%20103.8%20103.8%200%200%200-145.6%200%202.3%202.3%200%200%200-.7.7%202.3%202.3%200%200%200-.7.7%20103.8%20103.8%200%200%200%200%20145.6l.7.7a2.3%202.3%200%200%200%20.7.7%20103.8%20103.8%200%200%200%20145.6%200%202.3%202.3%200%200%200%20.7-.7%202.3%202.3%200%200%200%20.7-.7ZM40.4%20136h24.1a63.6%2063.6%200%200%200%2013%2031.2l-17.1%2017.1a87.5%2087.5%200%200%201-20-48.3Zm20-64.3%2017.1%2017.1a63.6%2063.6%200%200%200-13%2031.2H40.4a87.5%2087.5%200%200%201%2020-48.3ZM215.6%20120h-24.1a63.6%2063.6%200%200%200-13-31.2l17.1-17.1a87.5%2087.5%200%200%201%2020%2048.3Zm-48.4-42.5a63.6%2063.6%200%200%200-31.2-13V40.4a87.5%2087.5%200%200%201%2048.3%2020Zm-47.2-13a63.6%2063.6%200%200%200-31.2%2013L71.7%2060.4a87.5%2087.5%200%200%201%2048.3-20Zm-31.2%20114a63.6%2063.6%200%200%200%2031.2%2013v24.1a87.5%2087.5%200%200%201-48.3-20Zm47.2%2013a63.6%2063.6%200%200%200%2031.2-13l17.1%2017.1a87.5%2087.5%200%200%201-48.3%2020Zm42.5-24.3a63.6%2063.6%200%200%200%2013-31.2h24.1a87.5%2087.5%200%200%201-20%2048.3Z%22%20fill%3D%22url%28%23grad1%29%22%20class%3D%22fill-000000%22%3E%3C%2Fpath%3E%3C%2Fsvg%3E');
  }

  @media (max-width: 900px) {
    .logo {
      width: 120px;
      height: 120px;
      margin-bottom: 15px;
    }
  }
}
